<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>TEST</title>
    <style>
    body {
      text-align: center;
      align-items: center;
    }

    #gpsMapContainer {
      width: 400px;
      height: 400px;
      position: relative;
      /* background: #93998f; */
    }
    #gpsBuggyPin {
      width: 25px;
      height: 25px;
      position: absolute;
      /* background: red; */
      border-radius: 50%;
    }

    </style>
  </head>
  <body>
    <h1>
      Testing GPS animation
    </h1>

    <!--Animation container-->
    <div>
      <img id = "gpsMapContainer" src = "img\nasa.png"/>
      <div>
        <img id = "gpsBuggyPin" src = "img\moonbuggy.png" />
      </div>
      </div>
    </div>

    <script>

    (function(){
      move();
    }());

    function move() {
      var elem = document.getElementById("gpsBuggyPin");

      var paren = document.getElementById("gpsMapContainer")
      paren = paren.getBoundingClientRect();
      var parenPos = {
        left: paren.left + window.scrollX,
        top: paren.top + window.scrollY,
        right: paren.left+paren.width
      };

      var xPos = parenPos.left;
      var yPos = parenPos.top;

      var count = 0;
      var id = setInterval(frame, 10);

      function frame() {
        if (xPos == parenPos.right) {
          console.log("reset pos");

          xPos = parenPos.left;
          yPos = parenPos.top;

          count++;
          if(count>=3){
            clearInterval(id);
            console.log("stopped")
          }
        }
        else {
          console.log("moving");
          yPos++;
          xPos++;
          elem.style.top = yPos + 'px';
          elem.style.left = xPos + 'px';
        }
      }
    }
    </script>
  </body>
</html>
